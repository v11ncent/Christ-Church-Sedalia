---
import { Cloudinary } from "@cloudinary/url-gen";
import { Image } from "astro:assets";

interface Props {
  src: string;
  width: number;
  height: number;
  alt: string;
}

const cld = new Cloudinary({
  cloud: {
    cloudName: "dfyfrnpk4",
  },
});

const { src, width, height, alt } = Astro.props;

// 'https://sweet-creponne-9e8302.netlify.app/tina-images/pastor-3.PNG
// Prefix our image src with our public url so that cloudinary fetches a remote image

const cldSrc = cld
  .image(`https://sweet-creponne-9e8302.netlify.app${src}`)
  .format("auto")
  .delivery("q_auto")
  .resize(`c_crop,w_${width},h_${height},g_face`);

cldSrc.setDeliveryType("fetch");
---

<Image src={cldSrc.toURL()} width={width} height={height} alt={alt} />

<style>
  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
</style>
