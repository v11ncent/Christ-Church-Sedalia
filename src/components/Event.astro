---
import { Image } from "astro:assets";

interface Props {
  image: string;
  title: string;
  description: string;
  link: string;
  date: Date;
}

const { image, title, description, link, date } = Astro.props;
---

<article class="event">
  <div class="image-container">
    <Image
      src={image ? image : ""}
      width={400}
      height={320}
      alt="Image that hopefully represents the event."
    />
  </div>
  <div class="text-container">
    {title ? <p class="title">{title}</p> : ""}
    {date ? <p class="date">{`${date.toLocaleDateString()}`}</p> : ""}
  </div>
  <div class="hover-container">
    {
      link ? (
        <a
          href={link}
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Click to view the event on Facebook"
        />
      ) : (
        ""
      )
    }
    <div class="arrow"></div>
    <p>View event</p>
  </div>
  <div class="hover-background-container"></div>
</article>

<style lang="scss">
  @use "../styles/tokens/tokens" as t;

  .event {
    position: relative;
    width: 100%;
    height: 20rem;
    background-color: t.$clr-black;
    box-shadow: t.$s-main;
    border-radius: t.$br-main;
    cursor: pointer;
    overflow: hidden;

    // &::after {
    //   position: absolute;
    //   content: "";
    //   width: 100%;
    //   height: 100%;
    //   border-radius: t.$br-main;
    //   border: 0.125rem solid t.$clr-green;
    //   top: 0.5rem;
    //   left: 0.5rem;
    // }

    &:hover .hover-container {
      opacity: 1;
      transform: translate(0, -100%);
      pointer-events: all;
    }

    .hover-background-container {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      transition: all 0.3s cubic-bezier(0.785, 0.135, 0.15, 0.86);
    }

    &:hover .hover-background-container {
      background: rgba(0, 0, 0, 0.2);
    }
  }

  .text-container {
    position: absolute;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    padding: 1.25rem;
    top: 0;
    left: 0;
    z-index: 10;
    width: 100%;
    height: 100%;
    color: white;
  }

  .image-container {
    position: relative;
    width: 100%;
    height: 100%;

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    &::after {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      content: "";
      background: linear-gradient(
        180deg,
        rgba(0, 0, 0, 0) 0%,
        rgba(0, 0, 0, 0.3) 100%
      );
    }
  }

  .hover-container {
    position: absolute;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.785, 0.135, 0.15, 0.86);
    z-index: 10;
    pointer-events: none;

    a {
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 10;
      text-decoration: none;
    }

    .arrow {
      width: 4rem;
      height: 4rem;
      border-radius: 100%;
      background: center / 30% no-repeat url("../assets/arrow-previous.svg")
        t.$clr-tan;
      transform: rotate(180deg);
    }

    p {
      margin-top: 0.75rem;
      color: t.$clr-tan;
      font-size: 0.875rem;
    }
  }
</style>
